"use strict";function dye(){$.ajax({type:"post",url:"../php/check.php",dataType:"json",success:function(e){$.each(e.data,function(e,t){$(".checkout").css("background","tomato"),$(".create").append('<div class="product">\n                       \n                        <div class="content">\n                            <ul>\n                                <li>\n                                    <input type="checkbox">\n                                </li>\n                                <li>\n                                    <div class="cart_img">\n                                        <a href="javascript:;">\n                                            <img src="'.concat(t.img,'" alt="">\n                                        </a>\n                                    </div>\n                                </li>\n                                <li>\n                                    <a href="javascript:;">').concat(t.name,'</a>\n                                    <div class="qixi">\n                                        <img src="../images/qixi.png" alt="">\n                                    </div>\n                                    <div>\n                                        <span><img src="../images/yinhangka.png" alt=""></span>\n                                        <span><img src="../images/baozhang.png" alt=""></span>\n                                        <span><img src="../images/tuihuan.png" alt=""></span>\n                                    </div>\n                                    <span>商品编号：<i>').concat(t.id,"</i></span>\n                                </li>\n                                <li></li>\n                                <li>￥<span>").concat(t.price,"</span></li>\n                                <li>\n                                    <button class='jian'>-</button>\n                                    <input type=\"text\" class='num' value=\"").concat(t.num,"\">\n                                    <button class='jia'>+</button>\n                                </li>\n                                <li>\n                                    ￥<span>").concat(t.price*t.num,'</span>\n                                </li>\n                                <li>\n                                    <a href="javascript:;">移入收藏夹</a>\n                                    <a href="javascript:;" class="del">删除</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>'))}),$(".create").on("click",function(e){if("del"==$(e.target).attr("class")&&($(e.target).parent().parent().parent().parent().remove(),settlement(),$.ajax({type:"post",url:"../php/del.php",data:{id:$(e.target).parent().parent().children().eq(2).children().eq(3).children().html()},dataType:"json"})),"jia"==$(e.target).attr("class")){var t=parseInt($(e.target).prev().val());t++,$(e.target).prev().val(t),$(e.target).parent().next().children().html(t*$(e.target).parent().prev().children().html()),settlement(),$.ajax({type:"post",url:"../php/change.php",data:{id:Number($(e.target).parent().parent().children().eq(2).children().eq(3).children().html()),num:Number($(e.target).prev().val())}})}if("jian"==$(e.target).attr("class")){t=parseInt($(e.target).next().val());--t<1&&(t=1),$(e.target).next().val(t),$(e.target).parent().next().children().html(t*$(e.target).parent().prev().children().html()),settlement(),$.ajax({type:"post",url:"../php/change.php",data:{id:Number($(e.target).parent().parent().children().eq(2).children().eq(3).children().html()),num:Number($(e.target).next().val())}})}}),$(".create").on("input",".num",function(e){if(e.target.value=e.target.value.replace(/\D/g,""),$(e.target).parent().next().children().html($(e.target).val()*$(e.target).parent().prev().children().html()),settlement(),"num"==$(e.target).attr("class")){var t=$(e.target).val();t<1&&(t=1),$.ajax({type:"post",url:"../php/change.php",data:{id:$(e.target).parent().parent().children().eq(2).children().eq(3).children().html(),num:t}})}}),$('.create [type="checkbox"]').click(function(){settlement();var a=0;$.each($('.create [type="checkbox"]'),function(e,t){$(this).prop("checked")&&(++a==$('.create [type="checkbox"]').length?$(".all").prop("checked","checked"):($('.create [type="checkbox"]').length,$(".all").prop("checked",!1)),$(".acc_right").children().eq(0).children().html(a))})})}})}function settlement(){var a=0;$.each($('.create [type="checkbox"]'),function(e,t){$(this).prop("checked")?(a+=Number($(this).parent().parent().children().eq(6).children().html()),$(this).parent().parent().parent().css("background","#ffd5cc")):$(this).parent().parent().parent().css("background","")}),$(".settlement").html(a.toFixed(2))}$("#goods>div>ul>li").mouseover(function(){$("#goods>div>ul>span").stop().animate({left:125*$(this).index()},300)}),$("#goods>div>ul>li").mouseout(function(){$("#goods>div>ul>span").stop().animate({left:""},300)}),localStorage.getItem("user")&&(dye(),$(".login1").css("display","none")),$(".all").click(function(){$('.create [type="checkbox"]').prop("checked")?($('.create [type="checkbox"]').removeProp("checked"),$(".all").removeProp("checked")):($('.create [type="checkbox"]').prop("checked","checked"),$(".all").prop("checked","checked"));var a=0;$.each($('.create [type="checkbox"]'),function(e,t){$(this).prop("checked")?(a++,$(this).parent().parent().parent().css("background","#ffd5cc")):$(this).parent().parent().parent().css("background","")}),$(".acc_right").children().eq(0).children().html(a),settlement()}),$(".del_max").click(function(){$.each($('.create [type="checkbox"]'),function(e,t){$(this).prop("checked")&&($(this).parent().parent().parent().parent().remove(),$.ajax({type:"post",url:"../php/del.php",data:{id:$(this).parent().parent().children().eq(2).children().eq(3).children().html()},dataType:"json"}))})}),localStorage.getItem("user")&&($(".hea_left a:eq(1)").attr("href","../pages/index.html"),$(".hea_left a:eq(1)").html(localStorage.getItem("user")),$(".hea_left a:eq(2)").html("退出"),$(".hea_left a:eq(2)").click(function(){localStorage.clear(),$(".hea_left a:eq(2)").attr("href","")}));